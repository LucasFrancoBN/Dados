var f=Object.defineProperty;var y=(a,t,e)=>t in a?f(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var r=(a,t,e)=>(y(a,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();async function h(){let a,t;try{if(a=await fetch("https://api.origamid.dev/json/transacoes.json?"),!a.ok)throw new Error("FetchData");return t=await a.json(),t}catch(e){return e instanceof Error&&console.log(e.message),null}}function l(a,t){const e=document.getElementById(t);e&&Object.keys(a).forEach(o=>{e.innerHTML+=`<p>${o}: ${a[o]}</p>`})}function g(a){const t=Number(a.replaceAll(".","").replace(",","."));return isNaN(t)?null:t}function p(a){const[t,e]=a.split(" "),[o,s,n]=t.split("/").map(Number),[i,m]=e.split(":").map(Number);return new Date(n,s-1,o,i,m)}function D(a){return a.map(t=>({cliente_novo:Boolean(t["Cliente Novo"]),data:p(t.Data),email:t.Email,forma_de_pagament:t["Forma de Pagamento"],id:t.ID,nome:t.Nome,status:t.Status,valor:g(t["Valor (R$)"]),moeda:t["Valor (R$)"]}))}function N(a){const t=a.filter(({forma_de_pagament:o})=>o==="Cartão de Crédito").length,e=a.filter(({forma_de_pagament:o})=>o==="Boleto").length;return{["Cartão de Crédito"]:t,Boleto:e}}function P(a){const t=a.filter(({status:n})=>n==="Paga").length,e=a.filter(({status:n})=>n==="Recusada pela operadora de cartão").length,o=a.filter(({status:n})=>n==="Aguardando pagamento").length,s=a.filter(({status:n})=>n==="Estornada").length;return{Pagas:t,["Recusada pela operadora de cartão"]:e,["Aguardando pagamento"]:o,Estornada:s}}function S(a){return a.valor!==null}class b{constructor(t){r(this,"datas");r(this,"total");r(this,"payments");r(this,"infoPayments");r(this,"week");r(this,"bestDay");this.datas=t,this.total=this.setTotal(),this.payments=this.setPayments(),this.infoPayments=this.setInfoPayments(),this.week=this.setWeek(),this.bestDay=this.setBestDay()}setTotal(){return this.datas.filter(S).reduce((t,{valor:e})=>t+e,0)}setPayments(){return N(this.datas)}setInfoPayments(){return P(this.datas)}setWeek(){const t={Domingo:0,Segunda:0,Terça:0,Quarta:0,Quinta:0,Sexta:0,Sábado:0};for(let e=0;e<this.datas.length;e++)this.datas[e].data.getDay()===0?t.Domingo+=1:this.datas[e].data.getDay()===1?t.Segunda+=1:this.datas[e].data.getDay()===2?t.Terça+=1:this.datas[e].data.getDay()===3?t.Quarta+=1:this.datas[e].data.getDay()===4?t.Quinta+=1:this.datas[e].data.getDay()===5?t.Sexta+=1:this.datas[e].data.getDay()===6&&(t.Sábado+=1);return t}setBestDay(){return Object.entries(this.week).sort((t,e)=>e[1]-t[1])[0]}}const d=document.querySelector(".total"),c=document.querySelector(".bestDay"),u=document.querySelector(".table-body");async function w(){const a=await h();if(a){const t=D(a),e=new b(t);d&&(d.innerText+=` ${e.total.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}`),l(e.payments,"payments"),l(e.infoPayments,"infoPayments"),c&&(c.innerText+=` ${e.bestDay[0]}`),u&&(u.innerHTML=t.map(o=>`
          <tr>
            <td>${o.nome}</td>
            <td>${o.email}</td>
            <td>R$ ${o.moeda}</td>
            <td>${o.forma_de_pagament}</td>
            <td>${o.status}</td>
          </tr>
        `).join(" "))}}w();
